@page
@model ProjetoEcommerceSapatilhas.Pages.Account.RegisterModel
@{
    ViewData["Title"] = "Register";
}

<!DOCTYPE html>
<html lang="pt-PT">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Register</title>
    <link rel="stylesheet" href="/css/Register.css">
    <link href="https://fonts.googleapis.com/css2?family=Roboto+Condensed:ital,wght@1,900&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@600&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Jockey+One&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Istok+Web&display=swap" rel="stylesheet">
</head>

<header>
    <div class="name">
        <a href="@Url.Page("/Index")" style="text-decoration: none; color: inherit;">PISANTTE</a>
    </div>
    <div class="logotipo">
        <a href="@Url.Page("/Index")">
            <img src="/Images/Pisantte logo.png" alt="Pisantte logo">
        </a>
    </div>

    <div class="ico">
        <span class="sobre-element-content"><a href="#">SOBRE NÓS</a></span>
        <button class="bag">
            <img src="/Images/Shopping bag.png" alt="Carrinho das Compras">
        </button>
        <button src="myicon">
            <img src="/Images/User.png" alt="User">
        </button>
    </div>
</header>

<body>
    <div class="signup-container">
        <h2>Criar Conta</h2>

        <!-- Aqui, o formulário usa o método POST e validação de servidor do Razor -->
        <form id="signup-form" method="post">
            @if (!ModelState.IsValid)
            {
                <div class="alert alert-danger">
                    @foreach (var error in ModelState.Values.SelectMany(v => v.Errors))
                    {
                        <p>@error.ErrorMessage</p>
                    }
                </div>
            }
            <label for="username">Nome:</label>
            <input type="text" id="username" name="username" asp-for="Input.UserName" required>

            <label for="email">Email:</label>
            <input type="email" id="email" name="email" asp-for="Input.Email" required>

            <label for="password">Senha:</label>
            <input type="password" id="password" name="password" asp-for="Input.Password" autocomplete="new-password" required>

            <label for="confirm-password">Confirmar Senha:</label>
            <input type="password" id="confirm-password" name="ConfirmPassword" asp-for="Input.ConfirmPassword" autocomplete="new-password" required>

            <button type="submit" class="signup-button">Criar Conta</button>
            <p id="error-message"></p> <!-- Mensagem de erro do JS -->
        </form>

        <p>Já tem uma conta? <a href="@Url.Page("/Account/Login")">Inicie sessão aqui</a></p>
    </div>

    <script>function validateForm() {
            const password = document.getElementById("password").value;
            const confirmPassword = document.getElementById("confirm-password").value;
            const errorMessage = document.getElementById("error-message");

            if (password !== confirmPassword) {
                errorMessage.textContent = "As senhas não coincidem. Tente novamente.";
                return false; // Impede o envio do formulário
            }

            errorMessage.textContent = ""; // Limpa a mensagem de erro
            return true; // Permite o envio do formulário
        }</script>
</body>
</html>
